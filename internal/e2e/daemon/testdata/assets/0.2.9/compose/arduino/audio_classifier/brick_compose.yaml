# EI_AUDIO_CLASSIFICATION_MODEL = path to the model file
# CUSTOM_MODEL_PATH = path to the custom model directory
services:
  ei-audio-classifier-runner:
    image: ${DOCKER_REGISTRY_BASE:-ghcr.io/bcmi-labs/}app-bricks/ei-models-runner:0.3.1
    devices:
      - "/dev/dri:/dev/dri"
    group_add:
      - "render"      
    ports:
      - ${BIND_ADDRESS:-127.0.0.1}:${BIND_PORT:-1337}:1337
    volumes:
      - "${CUSTOM_MODEL_PATH:-/home/arduino/.arduino-bricks/ei-models}:${CUSTOM_MODEL_PATH:-/home/arduino/.arduino-bricks/ei-models}"
    command: ["--model-file", "${EI_AUDIO_CLASSIFICATION_MODEL:-/models/ootb/ei/glass-breaking.eim}", "--run-http-server", "1337", "--dont-print-predictions"]
